@base_moon_distance = 10

### FALLEN EMPIRE HOME SYSTEMS

# Home System I
gotc_fallen_1 = {
	name = "GOTC_LIZARD_SYSTEM_NAME"
	usage = fallen_empire_init
	class = "rl_standard_stars"
	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 50
	}

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
	}

	change_orbit = 50

	planet = {
		count = { min = 1 max = 3 }
		class = pc_asteroid
		orbit_distance = 0
		orbit_angle = { min = 40 max = 100 }
	}

	planet = {
		name = "GOTC_LIZARD_PLANET_NAME"
		orbit_distance = 15
		class = pc_city
		orbit_angle = { min = 90 max = 270 }
		size = 20
		deposit_blockers = none
		modifiers = none
		has_ring = no

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 1 max = 1 }
			name = "GOTC_LIZARD_MOON_NAME"
			class = pc_barren
			size = 8
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}

		init_effect = {
			create_cluster = {
				id = fe1_cluster
				radius = 120
				center = this.solar_system
			}

			set_planet_flag = fallen_empire_world
			set_planet_flag = fallen_empire_capital
			prevent_anomaly = yes
			set_owner = root
			set_controller = root
			set_capital = yes
			clear_deposits = yes
			while = {
				count = 10
				add_district = district_arcology_housing
			}
			add_zone = {
				district = district_arcology_housing
				zone = zone_urban
			}
			add_zone = {
				district = district_arcology_housing
				zone = zone_urban
			}
			while = {
				count = 3
				add_district = district_arcology_urban_1
			}
			add_zone = {
				district = district_arcology_urban_1
				zone = zone_research_physics_arcology
			}
			while = {
				count = 3
				add_district = district_arcology_urban_2
			}
			add_zone = {
				district = district_arcology_urban_2
				zone = zone_research_engineering_arcology
			}
			while = {
				count = 3
				add_district = district_arcology_urban_3
			}
			add_zone = {
				district = district_arcology_urban_3
				zone = zone_research_society_arcology
			}
			while = {
				count = 94
				create_pop_group = {
					species = owner_main_species
				}
			}
			root = {
				set_policy = {
					policy = artificial_intelligence_policy
					option = ai_servitude
					cooldown = no
				}
				set_policy = {
					policy = robot_pop_policy
					option = robot_pops_allowed
					cooldown = no
				}
			}
			root = { create_fe_servant_robots = yes }
			last_created_species = { save_event_target_as = fe_servants }
			while = {
				count = 94
				create_pop_group = {
					species = event_target:fe_servants
				}
			}
			create_fallen_empire_starting_navy = yes
			while = {
				count = 20
				create_army = {
					name = random
					owner = root
					species = root
					type = "robotic_army"
				}
			}
			# Central City
			add_building = building_ancient_palace
			add_building = building_institute
			add_building = building_research_upkeep_1
			add_building = building_research_efficiency_1
			add_building = building_fe_stronghold
			add_building = building_fe_security_2
			# Urban Expansion
			add_building = {
				zone = zone_urban
				building = building_dimensional_fabricator
			}
			add_building = {
				zone = zone_urban
				building = building_nano_forge
			}
			add_building = {
				zone = zone_urban
				building = building_affluence_center
			}
			# Urban Expansion
			add_building = {
				zone = zone_urban
				building = building_fe_dome
			}
			add_building = {
				zone = zone_urban
				building = building_nourishment_center
			}
			add_building = {
				zone = zone_urban
				building = building_class_4_singularity
			}
			# Physics Labs
			add_building = {
				zone = zone_research_physics_arcology
				building = building_physics_lab_3
			}
			add_building = {
				zone = zone_research_physics_arcology
				building = building_fe_lab_2
			}
			add_building = {
				zone = zone_research_physics_arcology
				building = building_fe_lab_2
			}
			# Engineering Labs
			add_building = {
				zone = zone_research_engineering_arcology
				building = building_engineering_facility_3
			}
			add_building = {
				zone = zone_research_engineering_arcology
				building = building_fe_lab_2
			}
			add_building = {
				zone = zone_research_engineering_arcology
				building = building_fe_lab_2
			}
			# Biology Labs
			add_building = {
				zone = zone_research_society_arcology
				building = building_biolab_3
			}
			add_building = {
				zone = zone_research_society_arcology
				building = building_fe_lab_2
			}
			add_building = {
				zone = zone_research_society_arcology
				building = building_fe_lab_2
			}
		}
	}


	planet = {
		count = { min = 1 max = 1 }
		orbit_distance = 25
		class = pc_gas_giant
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 1 max = 3 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 10
		}
	}


	planet = {
		count = { min = 1 max = 1 }
		orbit_distance = 35
		class = pc_gas_giant
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 2 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 10
		}
	}

	neighbor_system = {
		distance = { min = 0 max = 50 }
		initializer = "gotc_fallen_1_2"
	}
	neighbor_system = {
		distance = { min = 0 max = 50 }
		initializer = "gotc_fallen_orbitals_1"
	}
	neighbor_system = {
		distance = { min = 0 max = 50 }
		initializer = "gotc_fallen_orbitals_2"
	}

	init_effect = {
		create_fe_home_citadel = yes
	}
}

gotc_fallen_1_2 = {
	name = "GOTC_LIZARD_SYSTEM_NAME_2"
	usage = fallen_empire_init
	class = "rl_standard_stars"
	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 120
	}

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
	}

	change_orbit = 40

	planet = {
		count = { min = 1 max = 1 }
		orbit_distance = 15
		class = pc_molten
		size = { min = 8 max = 16 }
		orbit_angle = { min = 90 max = 270 }
	}

	planet = {
		name = "GOTC_LIZARD_PLANET_NAME_2"
		orbit_distance = 20
		class = pc_gaia
		orbit_angle = { min = 90 max = 270 }
		size = 15
		deposit_blockers = none
		modifiers = none
		has_ring = no

		init_effect = {
			create_fe_dsc = {
				OWNER = root
				DESIGN = "NAME_FE_MATERIALIST_Citadel_3"
			}
			set_planet_flag = fallen_empire_world
			prevent_anomaly = yes
			set_owner = root
			set_controller = root

			while = {
				count = 14
				add_district = district_city
			}
			while = {
				count = 35
				create_pop_group = {
					species = owner_main_species
				}
			}
			while = {
				count = 35
				create_pop_group = {
					species = event_target:fe_servants
				}
			}
			add_building = building_ancient_palace
			add_building = building_master_archive
			add_building = building_fe_stronghold
			add_building = building_fe_dome
			add_building = {
				zone = zone_energy
				building = building_class_4_singularity
			}
			add_building = {
				zone = zone_energy
				building = building_class_4_singularity
			}
			add_building = building_affluence_center
			add_building = building_nourishment_center
			add_building = building_fe_lab_2
			add_building = building_dimensional_fabricator
			add_building = building_nano_forge
			add_building = building_fe_lab_2
		}
	}

	planet = {
		count = { min = 0 max = 2 }
		orbit_distance = 20
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = {
		count = { min = 1 max = 1 }
		orbit_distance = 20
		class = pc_gas_giant
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 3 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	init_effect = {
		create_fe_citadel = yes
	}
}

# Home System II
gotc_fallen_2 = {
	name = "GOTC_RUS_SYSTEM_NAME"
	usage = fallen_empire_init
	class = "rl_standard_stars"
	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 50
	}

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
	}

	change_orbit = 50

	planet = {
		count = { min = 1 max = 3 }
		class = pc_asteroid
		orbit_distance = 0
		orbit_angle = { min = 40 max = 100 }
	}

	planet = {
		count = { min = 0 max = 2 }
		orbit_distance = 20
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = {
		name = "GOTC_RUS_PLANET_NAME"
		orbit_distance = 20
		class = pc_gaia
		orbit_angle = { min = 90 max = 270 }
		size = 30
		deposit_blockers = none
		modifiers = none

		init_effect = {
			create_fe_dsc = {
				OWNER = root
				DESIGN = "NAME_FE_SPIRITUALIST_Citadel_3"
			}
			create_cluster = {
				id = fe2_cluster
				radius = 140
				center = this.solar_system
			}

			set_planet_flag = fallen_empire_world
			set_planet_flag = fallen_empire_capital
			prevent_anomaly = yes
			set_owner = root
			set_controller = root
			set_capital = yes

			while = {
				count = 16
				add_district = district_city
			}
			while = {
				count = 2
				add_district_and_planet_size_if_needed_effect = {
					district = district_generator
				}
			}
			add_zone = {
				district = district_generator
				zone = zone_energy
			}
			while = {
				count = 6
				add_district_and_planet_size_if_needed_effect = {
					district = district_mining
				}
			}
			add_zone = {
				district = district_mining
				zone = zone_minerals
			}
			while = {
				count = 6
				add_district_and_planet_size_if_needed_effect = {
					district = district_farming
				}
			}
			add_zone = {
				district = district_farming
				zone = zone_food
			}
			while = {
				count = 115
				create_pop_group = {
					species = owner_main_species
				}
			}
			create_fallen_empire_starting_navy = yes
			while = {
				count = 20
				create_army = {
					name = random
					owner = root
					species = root
					type = "psionic_army"
				}
			}
			add_building = building_ancient_palace
			add_building = building_fe_dome
			add_building = building_fe_dome
			add_building = building_fe_temple_2
			add_building = building_fe_temple_2
			add_building = building_fe_mine_2
			add_building = building_fe_stronghold
			add_building = building_fe_stronghold
			add_building = building_dimensional_fabricator
			add_building = {
				zone = zone_energy
				building = building_class_4_singularity
			}
			add_building = building_affluence_center
			add_building = building_nano_forge
		}

		change_orbit = @base_moon_distance

		moon = {
			name = "GOTC_RUS_MOON_NAME"
			class = "pc_broken"
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
			modifiers = none

			init_effect = { prevent_anomaly = yes }
		}
	}

	planet = {
		name = "GOTC_RUS_PLANET_NAME_2"
		orbit_distance = 30
		class = pc_gaia
		orbit_angle = { min = 90 max = 270 }
		size = 22
		deposit_blockers = none
		modifiers = none

		init_effect = {
			create_fe_dsc = {
				OWNER = root
				DESIGN = "NAME_FE_SPIRITUALIST_Citadel_3"
			}
			set_planet_flag = fallen_empire_world
			prevent_anomaly = yes
			set_owner = root
			set_controller = root

			while = {
				count = 12
				add_district = district_city
			}
			while = {
				count = 2
				add_district_and_planet_size_if_needed_effect = {
					district = district_generator
				}
			}
			add_zone = {
				district = district_generator
				zone = zone_energy
			}
			while = {
				count = 5
				add_district_and_planet_size_if_needed_effect = {
					district = district_mining
				}
			}
			add_zone = {
				district = district_mining
				zone = zone_minerals
			}
			while = {
				count = 5
				add_district_and_planet_size_if_needed_effect = {
					district = district_farming
				}
			}
			add_zone = {
				district = district_farming
				zone = zone_food
			}
			while = {
				count = 68
				create_pop_group = {
					species = owner_main_species
				}
			}
			add_building = building_ancient_palace
			add_building = building_empyrean_shrine
			add_building = building_fe_dome
			add_building = building_fe_dome
			add_building = building_dimensional_fabricator
			add_building = building_fe_stronghold
			add_building = building_fe_stronghold
			add_building = {
				zone = zone_energy
				building = building_class_4_singularity
			}
			add_building = {
				zone = zone_energy
				building = building_class_4_singularity
			}
			add_building = {
				zone = zone_energy
				building = building_class_4_singularity
			}
			add_building = building_nano_forge
			add_building = building_nano_forge
		}
	}

	planet = {
		count = { min = 2 max = 4 }
		orbit_distance = 20
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = {
		count = { min = 1 max = 2 }
		orbit_distance = 20
		class = pc_gas_giant
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 3 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	neighbor_system = {
		distance = { min = 0 max = 50 }
		initializer = "gotc_fallen_orbitals_1"
	}
	neighbor_system = {
		distance = { min = 0 max = 50 }
		initializer = "gotc_fallen_orbitals_2"
	}
	neighbor_system = {
		distance = { min = 30 max = 100 }
		initializer = "gotc_fallen_holy_01"
	}
	neighbor_system = {
		distance = { min = 50 max = 150 }
		initializer = "gotc_fallen_holy_02"
	}
	neighbor_system = {
		distance = { min = 80 max = 200 }
		initializer = "gotc_fallen_holy_03"
	}
	neighbor_system = {
		distance = { min = 120 max = 250 }
		initializer = "gotc_fallen_holy_04"
	}
	neighbor_system = {
		spawn_chance = 25
		distance = { min = 0 max = 30 }
		initializer = "gotc_fallen_shrouded"
	}

	init_effect = {
		create_fe_home_citadel = yes
	}
}

# Home System III
gotc_fallen_3 = {
	usage = fallen_empire_init
	class = "rl_standard_stars"
	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 50
	}

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
	}

	change_orbit = 50

	planet = {
		count = { min = 1 max = 3 }
		class = pc_asteroid
		orbit_distance = 0
		orbit_angle = { min = 40 max = 100 }
	}

	planet = {
		class = "pc_gas_giant"
		orbit_distance = 60
		orbit_angle = 200
		size = 30
		has_ring = no

		change_orbit = @base_moon_distance

		moon = {
			class = "pc_gaia"
			size = 20
			orbit_distance = 5
			orbit_angle = 20
			deposit_blockers = none
			modifiers = none

			init_effect = {

				create_cluster = {
					id = fe3_cluster
					radius = 120
					center = this.solar_system
				}

				set_planet_flag = fallen_empire_world
				set_planet_flag = fallen_empire_capital
				prevent_anomaly = yes
				set_owner = root
				set_controller = root
				set_capital = yes

				while = {
					count = 19
					add_district = district_city
				}
				root = {
					set_policy = {
						policy = artificial_intelligence_policy
						option = ai_outlawed
						cooldown = no
					}
					set_policy = {
						policy = robot_pop_policy
						option = robot_pops_allowed
						cooldown = no
					}
				}
				if = { # Astro-Hungary
					limit = { root = { has_country_flag = astrohungary } }
					set_name = "GOTC_HAB_PLANET_NAME"
					solar_system = {
						set_name = "GOTC_HAB_SYSTEM_NAME"
					}
					
					while = {
						count = 32
						create_pop_group = {
							species = owner_main_species
						}
					}
					root = { # Create Swabrians
						create_species = {
							name = "GOTC_HAB_SECONDARY_SPECIES_NAME"
							plural = "GOTC_HAB_SECONDARY_SPECIES_PLURAL"
							adjective = "GOTC_HAB_SECONDARY_SPECIES_ADJECTIVE"
							class = ROBOT
							namelist = HUMAN2
							portrait = "tox_machine"
							traits = {
								trait = "trait_mechanical"
								trait = "trait_auto_mod_robotic"
								trait = "trait_robot_high_maintenance"
								trait = "trait_robot_artificial_sociologists"
								trait = "trait_robot_luxurious"
								trait = "trait_robot_streamlined_protocols"
								trait = "trait_robot_learning_algorithms"
							}
						}

						set_built_species = last_created_species
					}
					last_created_species = { save_event_target_as = fe_servants }
					while = {
						count = 52
						create_pop_group = {
							species = event_target:fe_servants
						}
					}
				
					create_species = { # Vurdvalah
						name = "GOTC_VURDVALAH_MAIN_SPECIES_NAME"
						plural = "GOTC_VURDVALAH_MAIN_SPECIES_PLURAL"
						adjective = "GOTC_VURDVALAH_MAIN_SPECIES_ADJECTIVE"
						class = ART
						portrait = synth09
						name_list="HUMAN3"
						traits = {
							ideal_planet_class = pc_continental
							trait = trait_presapient_natural_intellectuals
							trait = trait_necrophage
							trait = trait_venerable
							trait = trait_humanoid_jinxed
							trait = trait_intelligent
							trait = trait_solitary
						}
					}
					last_created_species = {
						set_species_flag = astrohungarian
						save_event_target_as = vurdvalah_species
					}
					create_pop_group = {
						species = event_target:vurdvalah_species
					}
				
					create_species = { # Kazak
						name = "GOTC_SICH_MAIN_SPECIES_NAME"
						plural = "GOTC_SICH_MAIN_SPECIES_PLURAL"
						adjective = "GOTC_SICH_MAIN_SPECIES_ADJECTIVE"
						class = PLANT
						portrait = pla9
						name_list="HUM1"
						traits = {
							ideal_planet_class = pc_arid
							trait = trait_unruly
							trait = trait_plantoid_phototrophic
							trait = trait_nomadic
							trait = trait_quarrelsome
							trait = trait_very_strong
						}
					}
					last_created_species = {
						save_event_target_as = kazak_species
					}
					create_pop_group = {
						species = event_target:kazak_species
					}
					
					# Pospolithoid
					if = { # Check Pospolithoid existence
						limit = {
							any_country = { has_country_flag = gotc_pospolithoid }
						}
						random_country = {
							limit = { has_country_flag = gotc_pospolithoid }
							owner_main_species = {
								set_species_flag = astrohungarian
								save_event_target_as = pospolithoid_species
							}
						}
					}
					else = { # Create Pospolithoid species
						create_species = { # Pospolithoid
							name = "GOTC_POSPOLITHOID_MAIN_SPECIES_NAME"
							plural = "GOTC_POSPOLITHOID_MAIN_SPECIES_PLURAL"
							adjective = "GOTC_POSPOLITHOID_MAIN_SPECIES_ADJECTIVE"
							class = LITHOID
							portrait = lith4
							name_list="LITHOID1"
							traits = {
								ideal_planet_class = pc_alpine
								trait = trait_lithoid
								trait = trait_intelligent
								trait = trait_industrious
								trait = trait_nomadic
								trait = trait_unruly
								trait = trait_deviants
							}
						}
						last_created_species = {
							set_species_flag = astrohungarian
							save_event_target_as = pospolithoid_species
						}
					}
					create_pop_group = {
						species = event_target:pospolithoid_species
					}
					
					# Netoropyr
					if = { # Check Netoropyr existence
						limit = {
							any_country = { has_country_flag = gotc_netoropyr }
						}
						random_country = {
							limit = { has_country_flag = gotc_netoropyr }
							owner_main_species = {
								set_species_flag = astrohungarian
								save_event_target_as = netoropyr_species
							}
						}
					}
					else = { # Create Netoropyr species
						create_species = { # Netoropyr
							name = "GOTC_NETOROPYR_MAIN_SPECIES_NAME"
							plural = "GOTC_NETOROPYR_MAIN_SPECIES_PLURAL"
							adjective = "GOTC_NETOROPYR_MAIN_SPECIES_ADJECTIVE"
							class = MOL
							portrait = mol18
							name_list="MOL4"
							traits = {
								ideal_planet_class = pc_tropical
								trait = trait_adaptive
								trait = trait_docile
								trait = trait_traditional
								trait = trait_slow_breeders
								trait = trait_weak
							}
						}
						last_created_species = {
							set_species_flag = astrohungarian
							save_event_target_as = netoropyr_species
						}
					}
					create_pop_group = {
						species = event_target:netoropyr_species
					}

					# Untermensch # Aryan
					if = { # Check Reich existence
						limit = {
							any_system = { has_star_flag = reich }
						}
						random_playable_country = {
							limit = {
								capital_scope.solar_system = { has_star_flag = reich }
							}
							capital_scope = {
								random_owned_species = {
									limit = { has_species_flag = untermensch }
									save_event_target_as = untermensch_species
								}
							}
							owner_main_species = {
								set_species_flag = astrohungarian
								save_event_target_as = aryan_species
							}
						}
					}
					else = { # Create Untermensch and Aryan species
						create_species = { # Untermensch
							name = "GOTC_REICH_SECONDARY_SPECIES_NAME"
							plural = "GOTC_REICH_SECONDARY_SPECIES_PLURAL"
							adjective = "GOTC_REICH_SECONDARY_SPECIES_ADJECTIVE"
							class = HUM
							portrait = humanoid_hp_02
							name_list="GOTC_JEW"
							traits = {
								ideal_planet_class = pc_alpine
								trait = trait_presapient_natural_intellectuals
								trait = trait_repugnant
								trait = trait_deviants
								trait = trait_thrifty
								trait = trait_traditional
								trait = trait_rapid_breeders
							}
						}
						last_created_species = {
							set_species_flag = untermensch
							save_event_target_as = untermensch_species
						}
						create_species = { # Aryan
							name = "GOTC_REICH_MAIN_SPECIES_NAME"
							plural = "GOTC_REICH_MAIN_SPECIES_PLURAL"
							adjective = "GOTC_REICH_MAIN_SPECIES_ADJECTIVE"
							class = MAM
							portrait = mam8
							name_list="HUMAN2"
							traits = {
								ideal_planet_class = pc_alpine
								trait = trait_perfected_genes
								trait = trait_talented
								trait = trait_intelligent
								trait = trait_docile
								trait = trait_repugnant
								trait = trait_solitary
							}
						}
						last_created_species = {
							set_species_flag = astrohungarian
							save_event_target_as = aryan_species
						}
					}
					while = {
						count = 12
						create_pop_group = {
							species = event_target:aryan_species
						}
					}
					while = {
						count = 4
						create_pop_group = {
							species = event_target:untermensch_species
						}
					}
				}
				else = { # Carebear
					set_name = "GOTC_CAREBEAR_PLANET_NAME"
					solar_system = {
						set_name = "GOTC_CAREBEAR_SYSTEM_NAME"
					}

					while = {
						count = 52
						create_pop_group = {
							species = owner_main_species
						}
					}
					root = { create_fe_servant_robots = yes }
					last_created_species = { save_event_target_as = fe_servants }
					while = {
						count = 52
						create_pop_group = {
							species = event_target:fe_servants
						}
					}
				}
				create_fallen_empire_starting_navy = yes

				while = {
					count = 20
					create_army = {
						name = random
						owner = root
						species = root
						type = "gene_warrior_army"
					}
				}
				add_building = building_ancient_palace
				add_building = building_fe_dome
				add_building = building_fe_administration_2
				add_building = building_fe_stronghold
				add_building = building_fe_stronghold
				add_building = building_affluence_center
				add_building = building_nourishment_center
				add_building = building_class_4_singularity
				add_building = building_class_4_singularity
				add_building = building_dimensional_fabricator
				add_building = building_fe_security_2
				add_building = building_fe_mine_2
			}
		}

		moon = {
			class = "pc_broken"
			size = 13
			orbit_distance = 5
			orbit_angle = 50

			init_effect = {
				if = { # Astro-Hungary
					limit = { root = { has_country_flag = astrohungary } }
					set_name = "GOTC_HAB_MOON_NAME"
				}
				else = { # Carebear
					set_name = "GOTC_CAREBEAR_MOON_NAME"
				}
				prevent_anomaly = yes
			}
		}

		moon = {
			class = "pc_gaia"
			size = 10
			orbit_distance = 8
			orbit_angle = 10
			deposit_blockers = none
			modifiers = none

			init_effect = {
				set_planet_flag = fallen_empire_world
				prevent_anomaly = yes
				set_owner = root
				set_controller = root

				while = {
					count = 9
					add_district = district_city
				}
				if = { # Astro-Hungary
					limit = { root = { has_country_flag = astrohungary } }
					set_name = "GOTC_HAB_PLANET_NAME_2"
					while = {
						count = 16
						create_pop_group = {
							species = owner_main_species
						}
					}
					while = {
						count = 2
						create_pop_group = {
							species = event_target:untermensch_species
						}
					}
				}
				else = { # Carebear
					set_name = "GOTC_CAREBEAR_PLANET_NAME_2"
					while = {
						count = 18
						create_pop_group = {
							species = owner_main_species
						}
					}
				}
				while = {
					count = 18
					create_pop_group = {
						species = event_target:fe_servants
					}
				}
				add_building = building_ancient_palace
				add_building = building_fe_stronghold
				add_building = building_fe_stronghold
				add_building = building_dimensional_fabricator
				add_building = building_dimensional_fabricator
				add_building = building_nano_forge
				add_building = building_nano_forge
				add_building = building_nano_forge
			}
		}

		moon = {
			class = "pc_gaia"
			size = 12
			orbit_distance = 5
			orbit_angle = 190
			deposit_blockers = none
			modifiers = none

			init_effect = {
				set_planet_flag = fallen_empire_world
				prevent_anomaly = yes
				set_owner = root
				set_controller = root

				while = {
					count = 11
					add_district = district_city
				}
				if = { # Astro-Hungary
					limit = { root = { has_country_flag = astrohungary } }
					set_name = "GOTC_HAB_PLANET_NAME_3"
					while = {
						count = 25
						create_pop_group = {
							species = owner_main_species
						}
					}
					while = {
						count = 2
						create_pop_group = {
							species = event_target:untermensch_species
						}
					}
				}
				else = { # Carebear
					set_name = "GOTC_CAREBEAR_PLANET_NAME_3"
					while = {
						count = 27
						create_pop_group = {
							species = owner_main_species
						}
					}
				}
				while = {
					count = 27
					create_pop_group = {
						species = event_target:fe_servants
					}
				}
				add_building = building_ancient_palace
				add_building = building_fe_stronghold
				add_building = building_fe_dome
				add_building = building_fe_market_2
				add_building = building_class_4_singularity
				add_building = building_class_4_singularity
				add_building = building_affluence_center
				add_building = building_affluence_center
				add_building = building_affluence_center
				add_building = building_fe_clinic_2
				add_building = building_nourishment_center
			}
		}
	}

	neighbor_system = {
		distance = { min = 0 max = 50 }
		initializer = "gotc_fallen_xeno_zoo"
	}
	neighbor_system = {
		distance = { min = 0 max = 50 }
		initializer = "gotc_fallen_orbitals_1"
	}
	neighbor_system = {
		distance = { min = 0 max = 50 }
		initializer = "gotc_fallen_orbitals_2"
	}

	init_effect = {
		create_fe_home_citadel = yes
	}
}

# Home System IV
gotc_fallen_4 = {
	name = "GOTC_QIN_SYSTEM_NAME"
	usage = fallen_empire_init
	class = "rl_standard_stars"
	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 50
	}

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
	}

	change_orbit = 50

	planet = {
		count = { min = 0 max = 3 }
		class = pc_asteroid
		orbit_distance = 0
		orbit_angle = { min = 40 max = 100 }
	}

	planet = {
		count = { min = 0 max = 3 }
		orbit_distance = 20
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = {
		name = "GOTC_QIN_PLANET_NAME"
		orbit_distance = 20
		class = pc_gaia
		orbit_angle = { min = 90 max = 270 }
		size = 25
		deposit_blockers = none
		modifiers = none
		has_ring = no

		init_effect = {
			create_cluster = {
				id = fe4_cluster
				radius = 100
				center = this.solar_system
			}

			set_planet_flag = fallen_empire_world
			set_planet_flag = fallen_empire_capital
			set_planet_flag = xenophobe_fe_capital
			prevent_anomaly = yes
			set_owner = root
			set_controller = root
			set_capital = yes

			while = {
				count = 24
				add_district = district_city
			}
			while = {
				count = 62
				create_pop_group = {
					species = owner_main_species
				}
			}
			root = {
				create_species = {
					name = "GOTC_QIN_SECONDARY_SPECIES_NAME"
					plural = "GOTC_QIN_SECONDARY_SPECIES_PLURAL"
					adjective = "GOTC_QIN_SECONDARY_SPECIES_ADJECTIVE"
					class = "LITHOID"
					portrait = "lith_human"
					name_list="MAM2"
					gender=male
					extra_trait_points = 5
					traits = {
						ideal_planet_class = pc_arid
						trait = "trait_lithoid"
						trait = "trait_presapient_earthbound"
						#trait = "trait_slow_learners"
						trait = "trait_venerable"
						trait = "trait_nerve_stapled"
						#trait = "trait_sedentary"
						trait = "trait_charismatic"
					}
					allow_negative_traits = no
				}
			}
			last_created_species = { save_event_target_as = fe_servants }
			while = {
				count = 62
				create_pop_group = {
					species = event_target:fe_servants
				}
			}
			create_fallen_empire_starting_navy = yes

			while = {
				count = 20
				create_army = {
					name = random
					owner = root
					species = root
					type = "xenomorph_army"
				}
			}
			add_building = building_ancient_palace
			add_building = building_fe_stronghold
			add_building = building_fe_stronghold
			add_building = building_fe_stronghold
			add_building = building_affluence_center
			add_building = building_nourishment_center
			add_building = building_fe_security_2
			add_building = building_class_4_singularity
			add_building = building_class_4_singularity
			add_building = building_dimensional_fabricator
			add_building = building_nano_forge
			add_building = building_nano_forge
		}

		moon = {
			name = "GOTC_QIN_MOON_NAME"
			class = "pc_gaia"
			size = 12
			orbit_distance = 14
			orbit_angle = 10
			deposit_blockers = none
			modifiers = none

			init_effect = {
				set_planet_flag = fallen_empire_world
				prevent_anomaly = yes
				set_owner = root
				set_controller = root

				while = {
					count = 11
					add_district = district_city
				}
				while = {
					count = 33
					create_pop_group = {
						species = owner_main_species
					}
				}
				while = {
					count = 33
					create_pop_group = {
						species = event_target:fe_servants
					}
				}
				add_building = building_ancient_palace
				add_building = building_fe_stronghold
				add_building = building_fe_stronghold
				add_building = building_affluence_center
				add_building = building_nourishment_center
				add_building = building_fe_mine_2
				add_building = building_fe_security_2
				add_building = building_class_4_singularity
				add_building = building_dimensional_fabricator
				add_building = building_fe_administration_2
				add_building = building_nano_forge
				add_building = building_nano_forge
			}
		}
	}

	planet = {
		count = { min = 2 max = 4 }
		orbit_distance = 20
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = {
		count = { min = 1 max = 2 }
		orbit_distance = 20
		class = pc_gas_giant
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 3 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	neighbor_system = {
		distance = { min = 0 max = 50 }
		initializer = "gotc_fallen_orbitals_1"
	}
	neighbor_system = {
		distance = { min = 0 max = 50 }
		initializer = "gotc_fallen_orbitals_2"
	}
	neighbor_system = {
		distance = { min = 0 max = 50 }
		initializer = "gotc_fallen_shielded_1"
	}
	neighbor_system = {
		distance = { min = 0 max = 50 }
		initializer = "gotc_fallen_shielded_2"
	}
	neighbor_system = {
		distance = { min = 0 max = 50 }
		initializer = "gotc_fallen_shielded_3"
	}

	init_effect = {
		create_fe_home_citadel = yes
	}
}

### STANDARD FALLEN EMPIRE SYSTEMS

gotc_fallen_col_1_1 = {
	class = "rl_standard_stars"
	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 50
	}

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
	}

	change_orbit = 50

	planet = {
		count = { min = 1 max = 3 }
		class = pc_asteroid
		orbit_distance = 0
		orbit_angle = { min = 40 max = 100 }
	}

	planet = {
		count = { min = 0 max = 2 }
		orbit_distance = 20
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	change_orbit = 10

	planet = {
		count = 1
		orbit_distance = 20
		home_planet = yes
		class = ideal_planet_class
		orbit_angle = { min = 90 max = 270 }
		size = 16
		deposit_blockers = none
		modifiers = none

		init_effect = {
			if = { # Reptiloid
				limit = { root = { has_country_flag = reptiloid } }
				set_name = "GOTC_LIZARD_PLANET_NAME_3"
				solar_system = {
					set_name = "GOTC_LIZARD_SYSTEM_NAME_3"
				}
			}
			else_if = { # Rus
				limit = { root = { has_country_flag = rus } }
				set_name = "GOTC_RUS_PLANET_NAME_3"
				solar_system = {
					set_name = "GOTC_RUS_SYSTEM_NAME_2"
				}
			}
			else_if = { # Qin
				limit = { root = { has_country_flag = qin } }
				set_name = "GOTC_QIN_PLANET_NAME_2"
				solar_system = {
					set_name = "GOTC_QIN_SYSTEM_NAME_2"
				}
			}
			else_if = { # Carebear
				limit = { root = { has_country_flag = carebear } }
				set_name = "GOTC_CAREBEAR_PLANET_NAME_4"
				solar_system = {
					set_name = "GOTC_CAREBEAR_SYSTEM_NAME_2"
				}
			}
			
			if = { # Astro-Hungary
				limit = { root = { has_country_flag = astrohungary } }
				set_name = "GOTC_HAB_PLANET_NAME_4"
				solar_system = {
					set_name = "GOTC_HAB_SYSTEM_NAME_2"
				}
				change_pc = pc_tropical
				if = { # Check Netoropyr existence
					limit = {
						NOT = { any_country = { has_country_flag = gotc_netoropyr } }
					}
					event_target:netoropyr_species = {
						set_species_homeworld = prev
					}
				}
				set_planet_flag = fallen_empire_world
				clear_blockers = yes
				prevent_anomaly = yes
				set_owner = ROOT
				add_building = building_ancient_palace
				add_building = building_fe_dome
				while = {
					count = 5
					add_district = {
						district_type = district_city
						ignore_cap = yes
					}
				}
				while = {
					count = 4
					create_pop_group = {
						species = owner_main_species
					}
				}
				create_pop_group = {
					species = event_target:fe_servants
				}
				create_pop_group = {
					species = event_target:aryan_species
				}
				while = {
					count = 3
					create_pop_group = {
						species = event_target:untermensch_species
					}
				}
				while = {
					count = 9
					create_pop_group = {
						species = event_target:netoropyr_species
					}
				}
			}
			else_if = {
				limit = { root = { is_fallen_empire_spiritualist = no } }
				create_fe_fringe_colony = yes
			}
			else = { create_fe_spiritualist_fringe_colony = yes }
		}

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = {
		count = { min = 2 max = 4 }
		orbit_distance = 20
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = {
		count = { min = 1 max = 2 }
		orbit_distance = 20
		class = pc_gas_giant
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 3 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	init_effect = {
		create_fe_citadel = yes
	}
}

gotc_fallen_col_1_2 = {
	class = "rl_standard_stars"
	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 115
	}

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
	}

	change_orbit = 60

	planet = {
		count = 1
		home_planet = yes
		class = ideal_planet_class
		orbit_distance = 0
		orbit_angle = { min = 90 max = 270 }
		size = { min = 16 max = 16 }
		deposit_blockers = none
		modifiers = none

		init_effect = {
			if = { # Reptiloid
				limit = { root = { has_country_flag = reptiloid } }
				set_name = "GOTC_LIZARD_PLANET_NAME_4"
				solar_system = {
					set_name = "GOTC_LIZARD_SYSTEM_NAME_4"
				}
			}
			else_if = { # Rus
				limit = { root = { has_country_flag = rus } }
				set_name = "GOTC_RUS_PLANET_NAME_4"
				solar_system = {
					set_name = "GOTC_RUS_SYSTEM_NAME_3"
				}
			}
			else_if = { # Qin
				limit = { root = { has_country_flag = qin } }
				set_name = "GOTC_QIN_PLANET_NAME_3"
				solar_system = {
					set_name = "GOTC_QIN_SYSTEM_NAME_3"
				}
			}
			else_if = { # Carebear
				limit = { root = { has_country_flag = carebear } }
				set_name = "GOTC_CAREBEAR_PLANET_NAME_5"
				solar_system = {
					set_name = "GOTC_CAREBEAR_SYSTEM_NAME_3"
				}
			}
			
			if = { # Astro-Hungary
				limit = { root = { has_country_flag = astrohungary } }
				set_name = "GOTC_HAB_PLANET_NAME_5"
				solar_system = {
					set_name = "GOTC_HAB_SYSTEM_NAME_3"
				}
				change_pc = pc_arid
				event_target:kazak_species = {
					set_species_homeworld = prev
				}
				set_planet_flag = fallen_empire_world
				clear_blockers = yes
				prevent_anomaly = yes
				set_owner = ROOT
				add_building = building_ancient_palace
				add_building = building_fe_dome
				while = {
					count = 5
					add_district = {
						district_type = district_city
						ignore_cap = yes
					}
				}
				while = {
					count = 4
					create_pop_group = {
						species = owner_main_species
					}
				}
				create_pop_group = {
					species = event_target:fe_servants
				}
				while = {
					count = 4
					create_pop_group = {
						species = event_target:kazak_species
					}
				}
				create_pop_group = {
					species = event_target:untermensch_species
				}
				while = {
					count = 7
					create_pop_group = {
						species = event_target:pospolithoid_species
					}
				}
			}
			else_if = {
				limit = { root = { is_fallen_empire_spiritualist = no } }
				create_fe_fringe_colony = yes
			}
			else = { create_fe_spiritualist_fringe_colony = yes }
		}

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = {
		count = 2
		orbit_distance = 20
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }
		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	change_orbit = 15

	planet = {
		count = { min = 2 max = 3 }
		class = pc_asteroid
		orbit_distance = 0
		orbit_angle = { min = 40 max = 110 }
	}

	planet = {
		count = { min = 2 max = 4 }
		orbit_distance = 25
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = {
		count = { min = 1 max = 2 }
		orbit_distance = 20
		class = pc_gas_giant
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 3 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = {
		count = { min = 0 max = 2 }
		orbit_distance = 20
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }
	}

	init_effect = {
		create_fe_citadel = yes
	}
}

gotc_fallen_col_2_1 = {
	class = "rl_standard_stars"
	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 50
	}

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
	}

	change_orbit = 50

	planet = {
		count = { min = 1 max = 3 }
		class = pc_asteroid
		orbit_distance = 0
		orbit_angle = { min = 40 max = 100 }
	}

	planet = {
		count = { min = 0 max = 2 }
		orbit_distance = 20
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	change_orbit = 10

	planet = {
		count = 1
		orbit_distance = 20
		home_planet = yes
		class = ideal_planet_class
		orbit_angle = { min = 90 max = 270 }
		size = 16
		deposit_blockers = none
		modifiers = none

		init_effect = {
			if = { # Reptiloid
				limit = { root = { has_country_flag = reptiloid } }
				set_name = "GOTC_LIZARD_PLANET_NAME_5"
				solar_system = {
					set_name = "GOTC_LIZARD_SYSTEM_NAME_5"
				}
			}
			else_if = { # Rus
				limit = { root = { has_country_flag = rus } }
				set_name = "GOTC_RUS_PLANET_NAME_5"
				solar_system = {
					set_name = "GOTC_RUS_SYSTEM_NAME_4"
				}
			}
			else_if = { # Qin
				limit = { root = { has_country_flag = qin } }
				set_name = "GOTC_QIN_PLANET_NAME_4"
				solar_system = {
					set_name = "GOTC_QIN_SYSTEM_NAME_4"
				}
			}
			else_if = { # Carebear
				limit = { root = { has_country_flag = carebear } }
				set_name = "GOTC_CAREBEAR_PLANET_NAME_6"
				solar_system = {
					set_name = "GOTC_CAREBEAR_SYSTEM_NAME_4"
				}
			}
			
			if = { # Astro-Hungary
				limit = { root = { has_country_flag = astrohungary } }
				set_name = "GOTC_HAB_PLANET_NAME_6"
				solar_system = {
					set_name = "GOTC_HAB_SYSTEM_NAME_4"
				}
				change_pc = pc_continental
				event_target:vurdvalah_species = {
					set_species_homeworld = prev
				}
				set_planet_flag = fallen_empire_world
				clear_blockers = yes
				prevent_anomaly = yes
				set_owner = ROOT
				add_building = building_ancient_palace
				add_building = building_fe_dome
				while = {
					count = 5
					add_district = {
						district_type = district_city
						ignore_cap = yes
					}
				}
				while = {
					count = 4
					create_pop_group = {
						species = owner_main_species
					}
				}
				create_pop_group = {
					species = event_target:fe_servants
				}
				create_pop_group = {
					species = event_target:untermensch_species
				}
				while = {
					count = 6
					create_pop_group = {
						species = event_target:vurdvalah_species
					}
				}
				while = {
					count = 5
					create_pop_group = {
						species = owner_main_species
					}
				}
			}
			else_if = {
				limit = { root = { is_fallen_empire_spiritualist = no } }
				create_fe_fringe_colony = yes
			}
			else = { create_fe_spiritualist_fringe_colony = yes }
		}

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = {
		count = { min = 2 max = 4 }
		orbit_distance = 20
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = {
		count = { min = 1 max = 2 }
		orbit_distance = 20
		class = pc_gas_giant
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 3 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	init_effect = {
		create_fe_citadel = yes
	}
}

gotc_fallen_col_2_2 = {
	class = "rl_standard_stars"
	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 115
	}

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
	}

	change_orbit = 60

	planet = {
		count = 1
		home_planet = yes
		class = ideal_planet_class
		orbit_distance = 0
		orbit_angle = { min = 90 max = 270 }
		size = { min = 16 max = 16 }
		deposit_blockers = none
		modifiers = none

		init_effect = {
			if = { # Reptiloid
				limit = { root = { has_country_flag = reptiloid } }
				set_name = "GOTC_LIZARD_PLANET_NAME_6"
				solar_system = {
					set_name = "GOTC_LIZARD_SYSTEM_NAME_6"
				}
			}
			else_if = { # Rus
				limit = { root = { has_country_flag = rus } }
				set_name = "GOTC_RUS_PLANET_NAME_6"
				solar_system = {
					set_name = "GOTC_RUS_SYSTEM_NAME_5"
				}
			}
			else_if = { # Qin
				limit = { root = { has_country_flag = qin } }
				set_name = "GOTC_QIN_PLANET_NAME_5"
				solar_system = {
					set_name = "GOTC_QIN_SYSTEM_NAME_5"
				}
			}
			else_if = { # Carebear
				limit = { root = { has_country_flag = carebear } }
				set_name = "GOTC_CAREBEAR_PLANET_NAME_7"
				solar_system = {
					set_name = "GOTC_CAREBEAR_SYSTEM_NAME_5"
				}
			}
			
			if = { # Astro-Hungary
				limit = { root = { has_country_flag = astrohungary } }
				set_name = "GOTC_HAB_PLANET_NAME_7"
				solar_system = {
					set_name = "GOTC_HAB_SYSTEM_NAME_5"
				}
				change_pc = pc_alpine
				if = { # Check Pospolithoid existence
					limit = {
						NOT = { any_country = { has_country_flag = gotc_pospolithoid } }
					}
					event_target:pospolithoid_species = {
						set_species_homeworld = prev
					}
				}
				set_planet_flag = fallen_empire_world
				clear_blockers = yes
				prevent_anomaly = yes
				set_owner = ROOT
				add_building = building_ancient_palace
				add_building = building_fe_dome
				while = {
					count = 5
					add_district = {
						district_type = district_city
						ignore_cap = yes
					}
				}
				while = {
					count = 4
					create_pop_group = {
						species = owner_main_species
					}
				}
				create_pop_group = {
					species = event_target:fe_servants
				}
				create_pop_group = {
					species = event_target:aryan_species
				}
				while = {
					count = 3
					create_pop_group = {
						species = event_target:untermensch_species
					}
				}
				while = {
					count = 9
					create_pop_group = {
						species = event_target:pospolithoid_species
					}
				}
			}
			else_if = {
				limit = { root = { is_fallen_empire_spiritualist = no } }
				create_fe_fringe_colony = yes
			}
			else = { create_fe_spiritualist_fringe_colony = yes }
		}

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = {
		count = 2
		orbit_distance = 20
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }
		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	change_orbit = 15

	planet = {
		count = { min = 2 max = 3 }
		class = pc_asteroid
		orbit_distance = 0
		orbit_angle = { min = 40 max = 110 }
	}

	planet = {
		count = { min = 2 max = 4 }
		orbit_distance = 25
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = {
		count = { min = 1 max = 2 }
		orbit_distance = 20
		class = pc_gas_giant
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 3 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = {
		count = { min = 0 max = 2 }
		orbit_distance = 20
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }
	}

	init_effect = {
		create_fe_citadel = yes
	}
}


gotc_fallen_orbitals_1 = {
	class = "rl_standard_stars"

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
	}

	change_orbit = 45

	planet = {
		count = { min = 2 max = 10 }
		orbit_distance = 20
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	init_effect = {
		if = { # Reptiloid
			limit = { root = { has_country_flag = reptiloid } }
			set_name = "GOTC_LIZARD_SYSTEM_NAME_7"
		}
		else_if = { # Rus
			limit = { root = { has_country_flag = rus } }
			set_name = "GOTC_RUS_SYSTEM_NAME_6"
		}
		else_if = { # Qin
			limit = { root = { has_country_flag = qin } }
			set_name = "GOTC_QIN_SYSTEM_NAME_6"
		}
		else_if = { # Carebear
			limit = { root = { has_country_flag = carebear } }
			set_name = "GOTC_CAREBEAR_SYSTEM_NAME_6"
		}
		else_if = { # Astro-Hungary
			limit = { root = { has_country_flag = astrohungary } }
			set_name = "GOTC_HAB_SYSTEM_NAME_6"
		}
		random_system_planet = {
			limit = {
				is_ideal_planet_class = {
					who = ROOT
					status = yes
				}
				is_colony = no
			}
			if = {
				limit = { root = { is_fallen_empire_spiritualist = no } }
				create_fe_fringe_colony = yes
			}
			else = { create_fe_spiritualist_fringe_colony = yes }
		}

		if = {
			limit = {
				any_system_planet = {
					is_owned_by = root
				}
			}
			create_fe_citadel = yes
			else = {
				create_fe_outpost = yes
			}
		}

	}

	neighbor_system = {
		distance = { min = 0 max = 50 }
		initializer = "gotc_fallen_col_1_1"
	}
	neighbor_system = {
		distance = { min = 0 max = 50 }
		initializer = "gotc_fallen_col_1_2"
	}
}

gotc_fallen_orbitals_2 = {
	class = "rl_standard_stars"

	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 95
	}

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
	}

	change_orbit = 30

	planet = {
		count = 2
		orbit_distance = 20
		orbit_angle = { min = 90 max = 270 }
	}

	change_orbit = 25

	planet = {
		count = { min = 1 max = 4 }
		class = pc_asteroid
		orbit_distance = 0
		orbit_angle = { min = 90 max = 270 }
	}

	planet = {
		count = { min = 2 max = 5 }
		orbit_distance = 25
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	init_effect = {
		if = { # Reptiloid
			limit = { root = { has_country_flag = reptiloid } }
			set_name = "GOTC_LIZARD_SYSTEM_NAME_8"
		}
		else_if = { # Rus
			limit = { root = { has_country_flag = rus } }
			set_name = "GOTC_RUS_SYSTEM_NAME_7"
		}
		else_if = { # Qin
			limit = { root = { has_country_flag = qin } }
			set_name = "GOTC_QIN_SYSTEM_NAME_7"
		}
		else_if = { # Carebear
			limit = { root = { has_country_flag = carebear } }
			set_name = "GOTC_CAREBEAR_SYSTEM_NAME_7"
		}
		else_if = { # Astro-Hungary
			limit = { root = { has_country_flag = astrohungary } }
			set_name = "GOTC_HAB_SYSTEM_NAME_7"
		}
		random_system_planet = {
			limit = {
				is_ideal_planet_class = {
					who = ROOT
					status = yes
				}
				is_colony = no
			}
			if = {
				limit = { root = { is_fallen_empire_spiritualist = no } }
				create_fe_fringe_colony = yes
			}
			else = { create_fe_spiritualist_fringe_colony = yes }
		}

		if = {
			limit = {
				any_system_planet = {
					is_owned_by = root
				}
			}
			create_fe_citadel = yes
			else = {
				create_fe_outpost = yes
			}
		}
	}

	neighbor_system = {
		distance = { min = 0 max = 50 }
		initializer = "gotc_fallen_col_2_1"
	}
	neighbor_system = {
		distance = { min = 0 max = 50 }
		initializer = "gotc_fallen_col_2_2"
	}
}

### SPECIAL FALLEN EMPIRE SYSTEMS

# Shrouded Planet
gotc_fallen_shrouded = {
	class = sc_black_hole
	name = "GOTC_RUS_SYSTEM_NAME_8"
	flags = { fallen_shrouded }

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
	}

	change_orbit = 35

	planet = {
		count = 1
		orbit_distance = 15
		class = pc_barren_cold
		size = 15
		orbit_angle = { min = 90 max = 270 }
	}

	planet = {
		count = 1
		orbit_distance = 30
		class = pc_shrouded
		name = "GOTC_RUS_PLANET_NAME_7"
		orbit_angle = { min = 90 max = 270 }
		size = 22
		modifiers = none
	}

	planet = {
		count = 1
		orbit_distance = 40
		size = 12
		class = pc_frozen
		orbit_angle = { min = 90 max = 270 }
	}

	planet = {
		count = 1
		orbit_distance = 25
		class = pc_frozen
		orbit_angle = { min = 90 max = 270 }
		size = 25
		change_orbit = @base_moon_distance

		moon = {
			count = 1
			class = pc_barren_cold
			size = 7
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}

	}

	init_effect = {
		every_system_planet = {
			clear_deposits = yes
		}

		create_fe_outpost = yes
	}
}


# Shielded Planet 1
gotc_fallen_shielded_1 = {
	class = "rl_standard_stars"
	name = "GOTC_QIN_SYSTEM_NAME_8"
	flags = { fallen_shielded_1 }

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
	}

	change_orbit = 35

	planet = {
		count = { min = 1 max = 3 }
		orbit_distance = 15
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }
	}

	planet = {
		count = 1
		orbit_distance = 20
		class = rl_habitable_normal
		orbit_angle = { min = 90 max = 270 }
		size = 16
		modifiers = none
		flags = { fallen_shield_world }

		init_effect = {
			prevent_anomaly = yes
			change_pc = {
				class = pc_shielded
				inherit_entity = yes
			}
			create_fe_dsc = {
				OWNER = root
				DESIGN = "NAME_FE_XENOPHOBE_Citadel_3"
			}
		}

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = {
		count = { min = 1 max = 3 }
		orbit_distance = 25
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }
	}

	planet = {
		count = { min = 1 max = 2 }
		orbit_distance = 20
		class = pc_gas_giant
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 1 max = 3 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = {
		count = { min = 0 max = 1 }
		orbit_distance = 20
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }
	}

	init_effect = {
		create_fe_outpost = yes
	}
}

# Shielded Planet 2
gotc_fallen_shielded_2 = {
	class = "rl_standard_stars"
	name = "GOTC_QIN_SYSTEM_NAME_9"
	flags = { fallen_shielded_2 }

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
	}

	change_orbit = 35

	planet = {
		count = { min = 1 max = 3 }
		orbit_distance = 15
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }
	}

	planet = {
		count = 1
		orbit_distance = 20
		class = rl_habitable_normal
		orbit_angle = { min = 90 max = 270 }
		size = 16
		modifiers = none
		flags = { fallen_shield_world }

		init_effect = {
			prevent_anomaly = yes
			change_pc = {
				class = pc_shielded
				inherit_entity = yes
			}
			create_fe_dsc = {
				OWNER = root
				DESIGN = "NAME_FE_XENOPHOBE_Citadel_3"
			}
		}

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = {
		count = { min = 1 max = 3 }
		orbit_distance = 25
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }
	}

	planet = {
		count = { min = 1 max = 2 }
		orbit_distance = 20
		class = pc_gas_giant
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 1 max = 3 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = {
		count = { min = 0 max = 1 }
		orbit_distance = 20
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }
	}

	init_effect = {
		create_fe_outpost = yes
	}
}

# Shielded Planet 3
gotc_fallen_shielded_3 = {
	class = "rl_standard_stars"
	name = "GOTC_QIN_SYSTEM_NAME_10"
	flags = { fallen_shielded_3 }

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
	}

	change_orbit = 35

	planet = {
		count = { min = 1 max = 3 }
		orbit_distance = 15
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }
	}

	planet = {
		count = 1
		orbit_distance = 20
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }
		size = 16
		modifiers = none
		flags = { fallen_shield_world }

		init_effect = {
			prevent_anomaly = yes
			change_pc = {
				class = pc_shielded
				inherit_entity = yes
			}
			create_fe_dsc = {
				OWNER = root
				DESIGN = "NAME_FE_XENOPHOBE_Citadel_3"
			}
		}

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = {
		count = { min = 1 max = 3 }
		orbit_distance = 25
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }
	}

	planet = {
		count = { min = 1 max = 2 }
		orbit_distance = 20
		class = pc_gas_giant
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 1 max = 3 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = {
		count = { min = 0 max = 1 }
		orbit_distance = 20
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }
	}

	init_effect = {
		create_fe_outpost = yes
	}
}

# Fallen Empire's Holy World 1
gotc_fallen_holy_01 = {
	class = "rl_standard_stars"
	name = "GOTC_RUS_SYSTEM_NAME_9"

	flags = { holy_system_1 }

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
	}

	change_orbit = 45

	planet = {
		count = 1
		orbit_distance = 30
		class = "pc_gaia"
		orbit_angle = { min = 90 max = 270 }
		size = 18
		name = "GOTC_RUS_PLANET_NAME_8"
		deposit_blockers = none
		flags = { holy_world_1 }

		init_effect = {
			prevent_anomaly = yes
			add_modifier = {
				modifier = "holy_planet"
				days = -1
			}
			create_ambient_object = {
				type = consecrated_planet_stage_3_object
				location = this

				use_3d_location = yes
				entity_scale_to_size = yes
			}
		}
	}

	planet = {
		count = { min = 2 max = 10 }
		orbit_distance = 20
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	init_effect = {
		random_list = { # 30% chance outpost is "broken"
			30 = {
				random_system_planet = {
					limit = { is_star = yes }
					create_broken_fe_outpost = yes
				}
			}
			70 = {}
		}
	}
}

# Fallen Empire's Holy World 2
gotc_fallen_holy_02 = {
	class = "rl_standard_stars"
	name = "GOTC_RUS_SYSTEM_NAME_10"
	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 95
	}

	flags = { holy_system_2 }

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
	}

	change_orbit = 30

	planet = {
		count = 2
		orbit_distance = 20
		orbit_angle = { min = 90 max = 270 }
	}

	change_orbit = 25

	planet = {
		count = { min = 1 max = 4 }
		class = pc_asteroid
		orbit_distance = 0
		orbit_angle = { min = 90 max = 270 }
	}

	planet = {
		count = 1
		orbit_distance = 25
		class = "pc_gaia"
		orbit_angle = { min = 90 max = 270 }
		size = 14
		name = "GOTC_RUS_PLANET_NAME_9"
		deposit_blockers = none
		flags = { holy_world_2 }

		init_effect = {
			prevent_anomaly = yes
			add_modifier = {
				modifier = "holy_planet"
				days = -1
			}
			create_ambient_object = {
				type = consecrated_planet_stage_3_object
				location = this

				use_3d_location = yes
				entity_scale_to_size = yes
			}
		}
	}

	planet = {
		count = { min = 2 max = 5 }
		orbit_distance = 30
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	init_effect = {
		random_list = { # 30% chance outpost is "broken"
			30 = {
				random_system_planet = {
					limit = { is_star = yes }
					create_broken_fe_outpost = yes
				}
			}
			70 = {}
		}
	}
}

# Fallen Empire's Holy World 3
gotc_fallen_holy_03 = {
	class = "rl_standard_stars"
	name = "GOTC_RUS_SYSTEM_NAME_11"

	flags = { holy_system_3 }

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
	}

	change_orbit = 45

	planet = {
		count = 1
		orbit_distance = 10
		class = "pc_gaia"
		name = "GOTC_RUS_PLANET_NAME_10"
		deposit_blockers = none
		orbit_angle = { min = 90 max = 270 }
		flags = { holy_world_3 }
		size = 10

		init_effect = {
			prevent_anomaly = yes
			add_modifier = {
				modifier = "holy_planet"
				days = -1
			}
			create_ambient_object = {
				type = consecrated_planet_stage_3_object
				location = this

				use_3d_location = yes
				entity_scale_to_size = yes
			}
		}
	}

	planet = {
		count = { min = 1 max = 2 }
		orbit_distance = 60
		class = pc_gas_giant
		orbit_angle = { min = 90 max = 270 }
		size = 25

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 1 max = 4 }
			size = { min = 8 max = 20 }
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 6
		}
	}

	change_orbit = 20

	planet = {
		count = { min = 0 max = 2 }
		orbit_distance = 20
		orbit_angle = { min = 90 max = 270 }
	}

	init_effect = {
		random_list = { # 30% chance outpost is "broken"
			30 = {
				random_system_planet = {
					limit = { is_star = yes }
					create_broken_fe_outpost = yes
				}
			}
			70 = {}
		}
	}
}

# Fallen Empire's Holy World 4
gotc_fallen_holy_04 = {
	class = "rl_standard_stars"
	name = "GOTC_RUS_SYSTEM_NAME_12"
	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 120
	}

	flags = { holy_system_4 }

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
	}

	change_orbit = 150

	planet = {
		count = 1
		orbit_distance = 10
		class = "pc_gaia"
		name = "GOTC_RUS_PLANET_NAME_11"
		deposit_blockers = none
		orbit_angle = { min = 90 max = 270 }
		flags = { holy_world_4 }
		size = 25

		init_effect = {
			prevent_anomaly = yes
			add_modifier = {
				modifier = "holy_planet"
				days = -1
			}
			create_ambient_object = {
				type = consecrated_planet_stage_3_object
				location = this

				use_3d_location = yes
				entity_scale_to_size = yes
			}
		}
	}

	change_orbit = -110

	planet = {
		count = { min = 0 max = 2 }
		orbit_distance = 20
		orbit_angle = { min = 90 max = 270 }
	}

	change_orbit = 110

	planet = {
		count = { min = 0 max = 2 }
		orbit_distance = 40
		orbit_angle = { min = 90 max = 270 }
	}

	init_effect = {
		random_list = { # 30% chance outpost is "broken"
			30 = {
				random_system_planet = {
					limit = { is_star = yes }
					create_broken_fe_outpost = yes
				}
			}
			70 = {}
		}
	}
}

# Fallen Empire Xeno Zoo
gotc_fallen_xeno_zoo = {
	class = "rl_standard_stars"
	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 80
	}

	flags = { fe_xeno_zoo }

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
	}

	change_orbit = 70

	planet = {
		count = 1
		orbit_distance = 15
		class = "pc_gaia"
		orbit_angle = { min = 90 max = 270 }
		size = 20

		orbit_angle = 60
		orbit_distance = 0
		deposit_blockers = none
		modifiers = none

		init_effect = {
			create_fe_dsc = {
				OWNER = root
				DESIGN = "NAME_FE_XENOPHILE_Citadel_3"
			}
			set_planet_flag = fallen_empire_world
			prevent_anomaly = yes
			set_owner = ROOT
			set_planet_flag = fe_the_preserve
			add_building = building_fe_xeno_zoo

			while = {
				count = 2
				create_pop_group = {
					species = owner_main_species
				}
			}

			if = { # Astro-Hungary
				limit = { root = { has_country_flag = astrohungary } }
				set_name = "GOTC_HAB_PLANET_NAME_8"
				solar_system = {
					set_name = "GOTC_HAB_SYSTEM_NAME_8"
				}
				create_pop_group = {
					species = event_target:vurdvalah_species
				}
				create_pop_group = {
					species = event_target:kazak_species
				}
				create_pop_group = {
					species = event_target:pospolithoid_species
				}
				create_pop_group = {
					species = event_target:netoropyr_species
				}
				create_pop_group = {
					species = event_target:aryan_species
				}
				create_pop_group = {
					species = event_target:untermensch_species
				}
			}
			else = { # Carebear
				set_name = "GOTC_CAREBEAR_PLANET_NAME_8"
				solar_system = {
					set_name = "GOTC_CAREBEAR_SYSTEM_NAME_8"
				}
				
				create_species = { # Mofumof
					name = "GOTC_CAREBEAR_SPECIES_1_NAME"
					plural = "GOTC_CAREBEAR_SPECIES_1_PLURAL"
					adjective = "GOTC_CAREBEAR_SPECIES_1_ADJECTIVE"
					class = MAM
					portrait = cyb7
					name_list="MAM2"
					traits = {
						trait = trait_unruly
						trait = trait_extremely_adaptive
					}
					homeworld = this
				}
				create_pop_group = {
					species = last_created_species
				}
				
				create_species = { # Ginger Tabbi
					name = "GOTC_CAREBEAR_SPECIES_2_NAME"
					plural = "GOTC_CAREBEAR_SPECIES_2_PLURAL"
					adjective = "GOTC_CAREBEAR_SPECIES_2_ADJECTIVE"
					class = MAM
					portrait = cyb1
					name_list="MAM2"
					traits = {
						trait = trait_rapid_breeders
						trait = trait_talented
						trait = trait_nomadic
						trait = trait_unruly
					}
					homeworld = this
				}
				create_pop_group = {
					species = last_created_species
				}
				
				create_species = { # Kot Smoking
					name = "GOTC_CAREBEAR_SPECIES_3_NAME"
					plural = "GOTC_CAREBEAR_SPECIES_3_PLURAL"
					adjective = "GOTC_CAREBEAR_SPECIES_3_ADJECTIVE"
					class = MAM
					portrait = mam14
					name_list="MAM2"
					traits = {
						trait = trait_ingenious
						trait = trait_quick_learners
						trait = trait_humanoid_jinxed
					}
					homeworld = this
				}
				create_pop_group = {
					species = last_created_species
				}
				
				create_species = { # Obuglenny Bely Kot
					name = "GOTC_CAREBEAR_SPECIES_4_NAME"
					plural = "GOTC_CAREBEAR_SPECIES_4_PLURAL"
					adjective = "GOTC_CAREBEAR_SPECIES_4_ADJECTIVE"
					class = MAM
					portrait = cyb7
					name_list="MAM2"
					traits = {
						ideal_planet_class = pc_savannah
						trait = trait_natural_sociologists
						trait = trait_charismatic
						trait = trait_conformists
						trait = trait_unruly
						trait = trait_decadent
					}
					homeworld = this
				}
				create_pop_group = {
					species = last_created_species
				}
				
				create_species = { # Bolshoy Kot
					name = "GOTC_CAREBEAR_SPECIES_5_NAME"
					plural = "GOTC_CAREBEAR_SPECIES_5_PLURAL"
					adjective = "GOTC_CAREBEAR_SPECIES_5_ADJECTIVE"
					class = MAM
					portrait = mam14
					name_list="MAM2"
					traits = {
						ideal_planet_class = pc_tundra
						trait = trait_syncretic_proles
						trait = trait_resilient
						trait = trait_venerable
						trait = trait_unruly
					}
					homeworld = this
				}
				create_pop_group = {
					species = last_created_species
				}
			}
		}
	}

	change_orbit = -45

	planet = {
		count = { min = 1 max = 1 }
		orbit_distance = 20
		orbit_angle = { min = 90 max = 270 }
	}

	init_effect = {
		create_fe_citadel = yes
	}
}

# Home System - Machine
gotc_fallen_machine = {
	usage = fallen_empire_init
	name = "GOTC_GATES_SYSTEM_NAME"
	class = "rl_standard_stars"

	flags = { ring_world_built }

	init_effect = {
		spawn_megastructure = {
			type = "ring_world_ruined"
			orbit_angle = -90
			orbit_distance = 45
		}

		create_fe_citadel = yes
	}

	planet = {
		class = star
		orbit_distance = 0
		orbit_angle = 0
	}

	change_orbit = 45

	planet = {
		class = "pc_ringworld_tech"
		name = "NAME_Circuit_I"
		orbit_angle = -30
		orbit_distance = 0
	}

	planet = {
		class = "pc_ringworld_seam"
		name = "NAME_Superstructure_I"
		orbit_angle = 30
		orbit_distance = 0
		init_effect = {
			create_fe_dsc = {
				OWNER = root
				DESIGN = "NAME_FE_MACHINE_Citadel_3"
			}
		}
	}

	planet = {
		class = "pc_ringworld_habitable"
		name = "GOTC_GATES_PLANET_NAME"
		orbit_angle = 30
		orbit_distance = 0
		deposit_blockers = none
		modifiers = none

		init_effect = {

			create_cluster = {
				id = fe_mach_cluster
				radius = 80
				center = this.solar_system
			}

			set_planet_flag = fallen_empire_world
			set_planet_flag = fallen_empire_capital
			prevent_anomaly = yes
			set_owner = root
			set_controller = root
			set_capital = yes

			while = {
				count = 5
				add_district = district_rw_science
			}
			while = {
				count = 4
				add_district = district_rw_nexus
			}
			while = {
				count = 105
				create_pop_group = {
					species = owner_main_species
				}
			}
			create_fallen_empire_starting_navy = yes

			while = {
				count = 20
				create_army = {
					name = random
					owner = root
					species = root
					type = "machine_assault_2"
				}
			}
			add_building = building_ancient_control_center
			add_building = building_nourishment_center
			add_building = building_fe_assembly_2
			add_building = building_ancient_cryo_chamber
			add_building = building_fe_stronghold
			add_building = building_fe_administration_machine_2
			add_building = building_fe_lab_2
			add_building = building_fe_lab_2
			add_building = building_dimensional_fabricator
			add_building = building_class_4_singularity
			add_building = building_class_4_singularity
			create_species = { # Windows bug
				name = "GOTC_GATES_PRESAPIENT_SPECIES_NAME"
				plural = "GOTC_GATES_PRESAPIENT_SPECIES_PLURAL"
				adjective = "GOTC_GATES_PRESAPIENT_SPECIES_ADJECTIVE"
				class = ART
				portrait = art11
				traits = {
					trait = trait_nomadic
					trait = trait_humanoid_existential_iteroparity
					trait = trait_noxious
					trait = trait_wasteful
					trait = trait_unruly
				}
				sapient = no
				homeworld = this
			}
			create_pop_group = {
				species = last_created_species
			}
		}
	}

	planet = {
		class = "pc_ringworld_tech"
		name = "NAME_Circuit_II"
		orbit_angle = 30
		orbit_distance = 0
	}

	planet = {
		class = "pc_ringworld_seam"
		name = "NAME_Superstructure_II"
		orbit_angle = 30
		orbit_distance = 0
		init_effect = {
			create_fe_dsc = {
				OWNER = root
				DESIGN = "NAME_FE_MACHINE_Citadel_3"
			}
		}
	}

	planet = {
		class = "pc_ringworld_habitable"
		name = "GOTC_GATES_PLANET_NAME_2"
		orbit_angle = 30
		orbit_distance = 0
		deposit_blockers = none
		modifiers = none

		init_effect = {
			set_planet_flag = fallen_empire_world
			prevent_anomaly = yes
			set_owner = ROOT

			while = {
				count = 5
				add_district = district_rw_nexus
			}
			while = {
				count = 50
				create_pop_group = {
					species = owner_main_species
				}
			}
			add_building = building_ancient_control_center
			add_building = building_fe_administration_machine_2
			add_building = building_dimensional_fabricator
			add_building = building_dimensional_fabricator
			add_building = building_dimensional_fabricator
			add_building = building_dimensional_fabricator
			add_building = building_nano_forge
			add_building = building_nano_forge
			add_building = building_nano_forge
			add_building = building_nano_forge
			add_building = building_nano_forge
		}
	}

	planet = {
		class = "pc_ringworld_tech"
		name = "NAME_Circuit_III"
		orbit_angle = 30
		orbit_distance = 0
	}

	planet = {
		class = "pc_ringworld_seam"
		name = "NAME_Superstructure_III"
		orbit_angle = 30
		orbit_distance = 0
		init_effect = {
			create_fe_dsc = {
				OWNER = root
				DESIGN = "NAME_FE_MACHINE_Citadel_3"
			}
		}
	}

	planet = {
		class = "pc_ringworld_habitable"
		name = "GOTC_GATES_PLANET_NAME_3"
		orbit_angle = 30
		orbit_distance = 0
		deposit_blockers = none
		modifiers = none

		init_effect = {
			set_planet_flag = fallen_empire_world
			prevent_anomaly = yes
			set_owner = ROOT

			while = {
				count = 5
				add_district = district_rw_generator
			}
			while = {
				count = 22
				create_pop_group = {
					species = owner_main_species
				}
			}
			add_zone = {
					district = district_rw_generator
					zone = zone_energy
				}
			add_building = building_ancient_control_center
			add_building = {
				zone = zone_energy
				building = building_class_4_singularity
			}
			add_building = {
				zone = zone_energy
				building = building_class_4_singularity
			}
			add_building = {
				zone = zone_energy
				building = building_class_4_singularity
			}
			add_building = {
				zone = zone_energy
				building = building_class_4_singularity
			}
			add_building = building_fe_assembly_2
		}
	}

	neighbor_system = {
		distance = { min = 0 max = 50 }
		initializer = "gotc_fallen_machine_2"
	}
	neighbor_system = {
		distance = { min = 0 max = 50 }
		initializer = "gotc_fallen_machine_3"
	}
	neighbor_system = {
		distance = { min = 0 max = 50 }
		initializer = "gotc_fallen_machine_4"
	}
	neighbor_system = {
		distance = { min = 0 max = 50 }
		initializer = "gotc_fallen_machine_5"
	}
}

gotc_fallen_machine_2 = {
	class = "rl_standard_stars"
	name = "GOTC_GATES_SYSTEM_NAME_2"

	planet = {
		class = star
		orbit_distance = 0

		init_effect = {
			while = {
				count = 4
				create_ambient_object = {
					type = "large_debris_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 45
						angle = random
					}
				}
			}
			while = {
				count = 2
				create_ambient_object = {
					type = "medium_debris_01_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 45
						angle = random
					}
				}
			}
			while = {
				count = 2
				create_ambient_object = {
					type = "medium_debris_02_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 45
						angle = random
					}
				}
			}
			create_ambient_object = {
				type = "small_debris_object"
				entity_offset_height = { min = -0 max = -25 }
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = prev
					distance = 45
					angle = random
				}
			}
		}
	}

	change_orbit = 45

	init_effect = {
		every_system_planet = {
			clear_deposits = yes
		}
		spawn_megastructure = {
			type = "ring_world_ruined"
			orbit_angle = 0
			orbit_distance = 45
		}
		spawn_megastructure = {
			type = "ring_world_ruined"
			orbit_angle = 90
			orbit_distance = 45
		}
		spawn_megastructure = {
			type = "ring_world_ruined"
			orbit_angle = 180
			orbit_distance = 45
		}
		spawn_megastructure = {
			type = "ring_world_ruined"
			orbit_angle = 270
			orbit_distance = 45
		}

		while = {
			count = 3
			create_ambient_object = {
				type = "large_debris_object"
				location = solar_system
			}
		}
		while = {
			count = 2
			create_ambient_object = {
				type = "medium_debris_01_object"
				location = solar_system
			}
		}
		while = {
			count = 2
			create_ambient_object = {
				type = "medium_debris_02_object"
				location = solar_system
			}
		}
		create_ambient_object = {
			type = "small_debris_object"
			location = solar_system
		}

		create_fe_outpost = yes
	}
}


gotc_fallen_machine_3 = {
	class = "rl_standard_stars"
	name = "GOTC_GATES_SYSTEM_NAME_3"

	planet = {
		class = star
		orbit_distance = 0

		init_effect = {

			while = {
				count = 4
				create_ambient_object = {
					type = "large_debris_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 45
						angle = random
					}
				}
			}
			while = {
				count = 2
				create_ambient_object = {
					type = "medium_debris_01_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 45
						angle = random
					}
				}
			}
			while = {
				count = 2
				create_ambient_object = {
					type = "medium_debris_02_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 45
						angle = random
					}
				}
			}
			create_ambient_object = {
				type = "small_debris_object"
				entity_offset_height = { min = -0 max = -25 }
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = prev
					distance = 45
					angle = random
				}
			}
		}
	}

	change_orbit = 45

	init_effect = {
		every_system_planet = {
			clear_deposits = yes
		}
		spawn_megastructure = {
			type = "ring_world_ruined"
			orbit_angle = 0
			orbit_distance = 45
		}
		spawn_megastructure = {
			type = "ring_world_ruined"
			orbit_angle = 90
			orbit_distance = 45
		}
		spawn_megastructure = {
			type = "ring_world_ruined"
			orbit_angle = 180
			orbit_distance = 45
		}
		spawn_megastructure = {
			type = "ring_world_ruined"
			orbit_angle = 270
			orbit_distance = 45
		}

		while = {
			count = 3
			create_ambient_object = {
				type = "large_debris_object"
				location = solar_system
			}
		}
		while = {
			count = 2
			create_ambient_object = {
				type = "medium_debris_01_object"
				location = solar_system
			}
		}
		while = {
			count = 2
			create_ambient_object = {
				type = "medium_debris_02_object"
				location = solar_system
			}
		}
		create_ambient_object = {
			type = "small_debris_object"
			location = solar_system
		}

		create_fe_outpost = yes
	}

	change_orbit = 45
}

gotc_fallen_machine_4 = {
	class = "rl_standard_stars"
	name = "GOTC_GATES_SYSTEM_NAME_4"

	planet = {
		class = star
		orbit_distance = 0

		init_effect = {
			while = {
				count = 15
				create_ambient_object = {
					type = "large_debris_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 45
						angle = random
					}
				}
			}
			while = {
				count = 25
				create_ambient_object = {
					type = "medium_debris_01_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 45
						angle = random
					}
				}
			}
			while = {
				count = 25
				create_ambient_object = {
					type = "medium_debris_02_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 45
						angle = random
					}
				}
			}
			while = {
				count = 30
				create_ambient_object = {
					type = "small_debris_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 45
						angle = random
					}
				}
			}
		}
	}

	change_orbit = 45

	init_effect = {
		every_system_planet = {
			clear_deposits = yes
		}
		while = {
			count = 15
			create_ambient_object = {
				type = "large_debris_object"
				location = solar_system
			}
		}
		while = {
			count = 25
			create_ambient_object = {
				type = "medium_debris_01_object"
				location = solar_system
			}
		}
		while = {
			count = 25
			create_ambient_object = {
				type = "medium_debris_02_object"
				location = solar_system
			}
		}
		while = {
			count = 30
			create_ambient_object = {
				type = "small_debris_object"
				location = solar_system
			}
		}

		create_fe_outpost = yes
	}
}

# Custodian Nexus
gotc_fallen_machine_5 = {
	class = sc_black_hole

	name = "GOTC_GATES_SYSTEM_NAME_5"

	planet = {
		class = star
		orbit_distance = 0

		init_effect = {
			while = {
				count = 30
				create_ambient_object = {
					type = "large_debris_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 45
						angle = random
					}
				}
			}
			while = {
				count = 50
				create_ambient_object = {
					type = "medium_debris_01_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 45
						angle = random
					}
				}
			}
			while = {
				count = 50
				create_ambient_object = {
					type = "medium_debris_02_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 45
						angle = random
					}
				}
			}
			while = {
				count = 100
				create_ambient_object = {
					type = "small_debris_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 45
						angle = random
					}
				}
			}
		}
	}

	change_orbit = 45

	init_effect = {
		every_system_planet = {
			clear_deposits = yes
		}
		while = {
			count = 30
			create_ambient_object = {
				type = "large_debris_object"
				location = solar_system
			}
		}
		while = {
			count = 50
			create_ambient_object = {
				type = "medium_debris_01_object"
				location = solar_system
			}
		}
		while = {
			count = 50
			create_ambient_object = {
				type = "medium_debris_02_object"
				location = solar_system
			}
		}
		while = {
			count = 100
			create_ambient_object = {
				type = "small_debris_object"
				location = solar_system
			}
		}

		create_fe_outpost = yes
	}
}
